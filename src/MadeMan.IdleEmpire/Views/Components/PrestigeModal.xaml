<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MadeMan.IdleEmpire.ViewModels"
             x:Class="MadeMan.IdleEmpire.Views.Components.PrestigeModal"
             x:DataType="vm:MainViewModel">

    <!-- Dark overlay -->
    <Grid x:Name="Overlay"
          BackgroundColor="#CC000000"
          IsVisible="{Binding IsPrestigeModalVisible}">

        <!-- Modal Card -->
        <Frame x:Name="ModalCard"
               BackgroundColor="{StaticResource Surface}"
               CornerRadius="16"
               Padding="0"
               Margin="24"
               VerticalOptions="Center"
               HorizontalOptions="Center"
               MaximumWidthRequest="350"
               BorderColor="{StaticResource Gold}">

            <Grid RowDefinitions="Auto,*">

                <!-- Header -->
                <Grid BackgroundColor="{StaticResource Primary}"
                      Padding="20,16">
                    <Label Text="PRESTIGE AVAILABLE"
                           FontFamily="BebasNeue"
                           FontSize="24"
                           CharacterSpacing="2"
                           TextColor="White"
                           HorizontalOptions="Center"/>
                </Grid>

                <!-- Content -->
                <VerticalStackLayout Grid.Row="1"
                                     Padding="24"
                                     Spacing="16">

                    <!-- Title progression -->
                    <Label HorizontalOptions="Center">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="{Binding CurrentTitle}"
                                      FontFamily="BebasNeue"
                                      FontSize="22"
                                      TextColor="{StaticResource TextSecondary}"/>
                                <Span Text="  ›  "
                                      FontSize="22"
                                      TextColor="{StaticResource Gold}"/>
                                <Span Text="{Binding NextTitle}"
                                      FontFamily="BebasNeue"
                                      FontSize="22"
                                      TextColor="{StaticResource Gold}"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>

                    <!-- Description -->
                    <Label Text="Reset your empire for a permanent bonus!"
                           FontSize="14"
                           TextColor="{StaticResource TextSecondary}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"/>

                    <!-- Income bonus comparison -->
                    <Frame BackgroundColor="{StaticResource SurfaceLight}"
                           CornerRadius="8"
                           Padding="16"
                           BorderColor="Transparent">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="INCOME BONUS"
                                   FontSize="11"
                                   TextColor="{StaticResource TextSecondary}"
                                   HorizontalOptions="Center"/>
                            <Label HorizontalOptions="Center">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="{Binding CurrentIncomeBonusDisplay}"
                                              FontSize="24"
                                              FontAttributes="Bold"
                                              TextColor="{StaticResource TextPrimary}"/>
                                        <Span Text="  ›  "
                                              FontSize="24"
                                              TextColor="{StaticResource Gold}"/>
                                        <Span Text="{Binding NextIncomeBonusDisplay}"
                                              FontSize="24"
                                              FontAttributes="Bold"
                                              TextColor="{StaticResource Gold}"/>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Warning -->
                    <Label Text="This will reset all operations and cash!"
                           FontSize="11"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"/>

                    <!-- Prestige button -->
                    <Button Text="PRESTIGE NOW"
                            Command="{Binding PrestigeCommand}"
                            BackgroundColor="{StaticResource Gold}"
                            TextColor="{StaticResource Background}"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            HeightRequest="50"/>

                    <!-- Later button -->
                    <Button Text="Continue Building"
                            Command="{Binding DismissPrestigeModalCommand}"
                            BackgroundColor="Transparent"
                            TextColor="{StaticResource TextSecondary}"
                            FontSize="14"/>

                </VerticalStackLayout>

            </Grid>

        </Frame>
    </Grid>

</ContentView>
