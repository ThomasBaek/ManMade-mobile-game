<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MadeMan.IdleEmpire.Views.Components.StatsModal"
             x:Name="ThisModal">

    <!-- Dark overlay -->
    <Grid IsVisible="{Binding IsVisible, Source={x:Reference ThisModal}}"
          InputTransparent="False">

        <!-- Background overlay (tappable to dismiss) -->
        <BoxView BackgroundColor="#CC000000"
                 InputTransparent="False">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped"/>
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Modal Card -->
        <Frame x:Name="ModalCard"
               BackgroundColor="{StaticResource Surface}"
               CornerRadius="16"
               Padding="24"
               Margin="16"
               BorderColor="{StaticResource Gold}"
               VerticalOptions="Center"
               HorizontalOptions="Fill"
               InputTransparent="False">

            <VerticalStackLayout Spacing="16">

                <!-- Header -->
                <Label Text="STATISTICS"
                       FontFamily="BebasNeue"
                       FontSize="32"
                       TextColor="{StaticResource Gold}"
                       HorizontalOptions="Center"/>

                <BoxView HeightRequest="1"
                         BackgroundColor="{StaticResource SurfaceLight}"
                         Margin="0,0,0,8"/>

                <!-- Money Stats -->
                <Label Text="EARNINGS"
                       FontSize="10"
                       FontAttributes="Bold"
                       TextColor="{StaticResource TextSecondary}"
                       Margin="0,0,0,4"/>

                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="8">
                    <Label Text="Total Earned" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblTotalEarned" Grid.Column="1" FontSize="14" FontAttributes="Bold" TextColor="{StaticResource Gold}"/>

                    <Label Grid.Row="1" Text="Total Spent" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblTotalSpent" Grid.Row="1" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>

                    <Label Grid.Row="2" Text="Highest Cash" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblHighestCash" Grid.Row="2" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>

                    <Label Grid.Row="3" Text="Offline Earnings" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblOfflineEarnings" Grid.Row="3" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>
                </Grid>

                <BoxView HeightRequest="1"
                         BackgroundColor="{StaticResource SurfaceLight}"
                         Margin="0,8"/>

                <!-- Progress Stats -->
                <Label Text="PROGRESS"
                       FontSize="10"
                       FontAttributes="Bold"
                       TextColor="{StaticResource TextSecondary}"
                       Margin="0,0,0,4"/>

                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto" RowSpacing="8">
                    <Label Text="Prestiges" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblPrestiges" Grid.Column="1" FontSize="14" FontAttributes="Bold" TextColor="{StaticResource Gold}"/>

                    <Label Grid.Row="1" Text="Upgrades Purchased" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblUpgrades" Grid.Row="1" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>

                    <Label Grid.Row="2" Text="Operations Unlocked" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblUnlocks" Grid.Row="2" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>
                </Grid>

                <BoxView HeightRequest="1"
                         BackgroundColor="{StaticResource SurfaceLight}"
                         Margin="0,8"/>

                <!-- Time Stats -->
                <Label Text="TIME"
                       FontSize="10"
                       FontAttributes="Bold"
                       TextColor="{StaticResource TextSecondary}"
                       Margin="0,0,0,4"/>

                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" RowSpacing="8">
                    <Label Text="Time Played" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblTimePlayed" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>

                    <Label Grid.Row="1" Text="First Played" TextColor="{StaticResource TextSecondary}" FontSize="14"/>
                    <Label x:Name="LblFirstPlayed" Grid.Row="1" Grid.Column="1" FontSize="14" TextColor="{StaticResource TextPrimary}"/>
                </Grid>

                <!-- Close Button -->
                <Button Text="CLOSE"
                        Clicked="OnCloseClicked"
                        BackgroundColor="{StaticResource SurfaceLight}"
                        TextColor="{StaticResource TextPrimary}"
                        CornerRadius="8"
                        FontAttributes="Bold"
                        HeightRequest="44"
                        Margin="0,16,0,0"/>

            </VerticalStackLayout>
        </Frame>
    </Grid>
</ContentView>
